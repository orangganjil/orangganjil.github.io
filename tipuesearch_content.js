var tipuesearch = {"pages":[{"title":"About Cody Hatch","text":"I am first and foremost a husband and father. I enjoy reading, science, skiing, sailing, and sim racing. My career in the cyber security field has spanned two decades. I currently work as a Sr. Sales Engineer at Exabeam , where I get to combine my passions for cyber security, machine learning, and data science. Prior to this I have been: CISO at the Utah System of Higher Education Sr. Security Engineer and Security Practice Lead at CompuNet Manager of Security at America First Credit Union You can reach me at the following: Email: comments@codyhatch.com Twitter: @codyhatch GitHub: @orangganjil LinkedIn: Profile","tags":"pages","url":"pages/about.html","loc":"pages/about.html"},{"title":"US Federal Income and Spending","text":"Part of being an informed citizen of the United States is to understand in what ways the federal government spends the money it collects, as well as the sources of government revenue. To aid in that understanding, I have provided two basic charts covering receipts and expenses for the US federal government. All amounts have been adjusted to 1995 dollars using CPI-U from the US Bureau of Labor Statistics.","tags":"Data Science","url":"data-science/us-federal-income-spending.html","loc":"data-science/us-federal-income-spending.html"},{"title":"Utah COVID-19 Statistics","text":"COVID-19 in Utah, like everywhere else, has been a story of tragedy and heroism (especially the healthcare workers, people staffing food banks, and other essential workers). I am interested in some basic statistics regarding the virus in Utah, which I have placed here along with some commentary; however, it is imperative to remember that every death and painful recovery creates a web of grief. These numbers represent human tragedy, so take a moment to reach out to a loved one you know has been affected, and remind them of your love for them. I have heard many acquaintances advocate letting things play out to achieve herd immunity. While the numbers needing to be infected in order to achieve herd immunity vary with each virus, studies have predicted that COVID-19 would require approximately a 70% infection rate in order for a community to reach herd immunity. Currently in Utah there have been about 306,000 people infected and 1,393 fatalities, for a mortality rate of 0.46%. Utah has a population of 3,200,000 and 70% of that population would be 2,240,000. If 0.46% of that population were to die from the disease, it would represent 10,197 deaths - almost more than all other causes combined. I also was curious how Utah's mortality rate stacks up against several other western states. Interestingly, Utah compares very favorably, especially considering the large population in metropolitan centers. I'm not sure why this is so, but it is interesting nonetheless.","tags":"Data Science","url":"data-science/utah-covid19-stats.html","loc":"data-science/utah-covid19-stats.html"},{"title":"Whose Image is This?","text":"This past week I attended the Broadway musical Dear Evan Hansen, which was spectacular (one of the best musicals I've attended) largely because it spoke to the deep desire we have as humans to be seen and loved. It came on the heels of reading, earlier in the week, the account of the Pharisees and Herodians testing Jesus regarding the payment of taxes to Caesar. Mark 12:13-17 tells the story: Then they sent to him some Pharisees and some Herodians to trap him in what he said. And they came and said to him, \"Teacher, we know that you are sincere, and show deference to no one; for you do not regard people with partiality, but teach the way of God in accordance with truth. Is it lawful to pay taxes to the emperor, or not? Should we pay them, or should we not?\" But knowing their hypocrisy, he said to them, \"Why are you putting me to the test? Bring me a denarius and let me see it.\" And they brought one. Then he said to them, \"Whose head is this, and whose title?\" They answered, \"The emperor's.\" Jesus said to them, \"Give to the emperor the things that are the emperor's, and to God the things that are God's.\" And they were utterly amazed at him. This story is usually referenced as an example of some sort of a two-tiered teaching on economics when people talk about the implications of Jesus' social teachings. It is frequently used to suggest that God's system is over there, and our economic system (usually captialism) is over here, separating the two. However, I'd like to look at it a bit differently, if possible, stemming from the comment that \"they were utterly amazed at him,\" because, to me, reading that text through the typical lens of separate economic systems just doesn't seem to be that amazing. Why were the Pharisees and Herodians so amazed by this? The Pharisees and Herodians thought they were going to be clever and get Jesus to either repudiate the paying of tribute to the emperor, thus breaking the law and revolting against the emperor; or declare the legitimacy of Roman rule through the payment of taxes, placing himself at odds with the Jewish longing for Zion. Jesus, however, turns the tables on them by asking them to bring him a denarius (Roman coin). Jesus then asks the Pharisees and Herodians whose image is on the coin, and whose title. The Greek word here is εἰκών, or icon/image in English. His testers then state that it is Caesar's image and title on the coin, so Jesus states that they should return to Caesar that which is Caesar's property, at which point they become amazed. So, why are they amazed? I'd suggest the answer to that question requires a reference to Genesis 1:27: So God created humankind in his image, in the image of God he created them; male and female he created them. Here, in the LXX (Greek version of the Old Testament), the word translated as image is εἰκών, the same word used in Mark's telling of the \"render unto Caesar\" story. So, if the coins with Caesar's image on them are his property, then by extension humanity, which bears God's image, not Caesar's, is not. In one fell swoop Jesus emphasized that, while Caesar's kingdom made claim to ultimately worthless material, God's kingdom makes claim to all of humanity. And what does this King do with his possession? He gives them freedom, lavishes grace upon them, loves them, and gives his very life for them. Such a statement – along with its implications for economics, politics, and class – is truly amazing.","tags":"Religion","url":"religion/whose-image-is-this.html","loc":"religion/whose-image-is-this.html"},{"title":"Purse, Bag, and Sword","text":"In Luke's Gospel, during the Passover meal, there is an interesting exchange between Jesus and his disciples, where Jesus seems to exhort them to sell their belongings in order to buy a sword. The text is frequently used to justify the acquisition of firearms and other weapons in arguments over the Second Amendment to the US Constitution; however, I'd like to explore a different interpretation of the verses. Here is the text: He said to them, \"When I sent you out without a purse, bag, or sandals, did you lack anything?\" They said, \"No, not a thing.\" He said to them, \"But now, the one who has a purse must take it, and likewise a bag. And the one who has no sword must sell his cloak and buy one. For I tell you, this scripture must be fulfilled in me, ‘And he was counted among the lawless'; and indeed what is written about me is being fulfilled.\" They said, \"Lord, look, here are two swords.\" He replied, \"It is enough.\" Luke 22:35-38, NRSV There are several interesting things about these verses: The commands here seem to be the opposite of Jesus' earlier command at the time he sent his disciples out to preach, where he told them not to take their purse or bag, but to only take their cloak. What does the command to buy a sword have to do with the fulfillment of scripture that Jesus will be counted among the lawless? If Jesus just finished telling the disciples to go and buy swords, why does he then say that two swords are sufficient? So, I'd like to examine the text of these verses more closely, as well as \"zoom out\" to get additional context. I think doing so will be very beneficial to understanding Jesus' comments as presented here by Luke. Luke is trying to tell a story with a specific purpose, so it is important to keep that in mind. And remember, these are my ideas; I'm just exploring them and am not declaring this interpretation as definitive, though I find it quite persuasive. First, let's \"zoom out\" and look at the context of these verses. Verses 7-13 have Jesus and his disciples preparing for the Passover meal. They acquired a room in a guest house and have sat down for a meal. This is the location and setting for the comments we are examining. Next, in verses 14-20, Jesus institutes the Lord's Supper (i.e., Eucharist, Sacrament). This is important because Jesus is teaching his disciples about his upcoming sacrifice for them and the introduction of the new covenant (see Jeremiah 31:31-34) based on the imminent presence of God. Then, in verses 21-23 Jesus mentions that one of them will betray him. So Jesus has moved from a discussion of his own sacrifice to the topic of betrayal. In verses 24-30 the disciples begin discussing who is the greatest among them. You can kind of see how the conversation is flowing, as Luke draws out conversations key to his narrative. They've moved from Jesus talking about his sacrifice; then betrayal; and then the disciples arguing about who will be the greatest among them, causing Jesus to bring them back to the sacrifice motif. Next, verses 31-34 return to a topic similar in nature to betrayal: denial – specifically, Peter's denial of Jesus. Jesus says, \"Simon, Simon, listen! Satan has demanded to sift all of you like wheat, but I have prayed for you that your own faith may not fail; and you, when once you have turned back, strengthen your brothers.\" Peter then exclaims that he is willing to go anywhere Jesus goes, including death, at which point Jesus predicts that Peter will, in fact, deny that he even knew Jesus. Now we move to the verses in question. Jesus then turns to the rest of the disciples and asks them if, when he had sent them out previously – without purse, bag, or sandals – they had lacked anything. They reply that they did not lack anything. He then tells them that they will be taking their purse and bag, and that the one thing he had previously told them to take – their cloak – he tells them they will sell for a sword. This is completely backward to what he had previously told them to do when they represented him . It is also opposite his previous description of those who make up the Kingdom of God: those who turn the other cheek, pray for their enemies, etc.; and opposite his statement that those who live by the sword will die by the sword. So what's going on? Keep in mind that we are still on the topic of betrayal/denial, contrasted with the example of Jesus' sacrifice. I think this statement is Jesus' description of how his entire set of disciples will deny him. They will reject all that the kingdom consists of and revert to the ways of this world: self-preservation, seeking after greatness, etc. So just as Peter will outright deny Jesus, the entire group of disciples will also do so by embracing the ways of this world, specifically taking up the sword, which is a means of self defense and oppression. It is not the way of Jesus or of the kingdom, which is why it fulfills scripture, counting Jesus among transgressors, for in doing so his disciples have become transgressors/lawless! In fact, the verse here quoted by Jesus is from Isaiah 53, which is one of the Suffering Servant texts from Isaiah (I highly recommend you read the chapter). It is in that chapter where we are told we are healed by Jesus' stripes; in other words, we're not healed by taking up the sword. This will become more clear below. The disciples then tell Jesus that they've already got two swords at hand, which Jesus indicates is enough. Clearly Jesus isn't exhorting them to violence to defend themselves against Rome or religious authorities, for two swords would never be enough in such a situation; however, two swords are enough to become transgressors against the Kingdom of God. Jesus and his disciples then, in verses 39-46, move to the Mount of Olives where Jesus prays and the disciples fall asleep. When he finishes he awakes them and says, \"Get up and pray that you may not come into the time of trial.\" This statement reminds us of the Lord's Prayer, where we are to specifically ask that we not be led \"into the time of trial, but deliver us from evil.\" What evil is being spoken of? I think we are about to find out. Verses 47-53 recount Jesus' betrayal by Judas and subsequent arrest. A \"crowd\" comes, Judas kisses Jesus on the cheek in order to identify him. The key part of the narrative then follows: When those who were around him [Jesus] saw what was coming, they asked, \"Lord, should we strike with the sword ?\" Then one of them struck the slave of the high priest and cut off his right ear. But Jesus said, \"No more of this!\" And he touched his ear and healed him. Luke 22:49-51 NRSV [Emphasis mine] Here, the disciples (Luke uses the terms \"those\" and \"them\" here) revert to the use of the sword to defend Jesus. Jesus says, \"No more of this,\" reaches out, and heals the person struck by the sword. Here we have the dichotomy that was setup earlier, where the disciples revert to the ways of the world, striking out in violence, and Jesus shows that it is his way which brings healing. As Isaiah 53 says, speaking of the Servant, \"They made his grave with the wicked and his tomb with the rich, although he had done no violence… \" Earlier, the text says: All we like sheep have gone astray; we have all turned to our own way, and the Lord has laid on him the iniquity of us all. Isaiah 53:6 NRSV And in verse five it says: But he was wounded for our transgressions, crushed for our iniquities; upon him was the punishment that made us whole, and by his bruises we are healed. Isaiah 53:5 NRSV Perhaps this is why Luke alluded to the Lord's Prayer. The \"time of trial\" appears to be the choice to follow the way of Jesus, or the way of this world. Love vs. violence. We pray to be delivered from evil/\"the evil one\"/\"the lawless one\", who appears when we resort to the ways of this world, accuse others, and reject the way of the Kingdom. Instead, we should be seeking God's Kingdom to come, and for his will to be done here on earth, as it is in heaven. One of the interesting aspects of the text here is that Luke, in verses 54-62, places Peter's denial of Jesus directly after the previous arrest sequence, forming what appears to be a chiasmus: Jesus predicts Peter's denial Jesus predicts disciples' denial Jesus prays for deliverance but obeys the Father Disciples deny Jesus by resorting to the sword Peter denies Jesus I think Luke is demonstrating the futility of our way as compared to the way of Jesus. We are all transgressors and have, in our own way, denied Jesus, just as all of the disciples did that night. However, it is through Jesus that we too are healed. Just as the servant healed by Jesus' hand had come with the crowd, bearing clubs and swords, only to be healed by Jesus, we too may find ourselves healed by Jesus in the midst of our transgressions, learning that truly we must not live by the sword or seek after wealth (purse), but rather by radical love.","tags":"Religion","url":"religion/purse-bag-and-sword.html","loc":"religion/purse-bag-and-sword.html"},{"title":"US Mean Income","text":"There is a growing income disparity in the United States, which I find very worrisome. It doesn't seem sustainable and creates a nation of haves and have-nots. The graph below shows US mean household income, in 2017 CPI adjusted dollars, from 1967 to 2017. It is broken into quintiles and includes the top five percent of earners for comparison. I've also added the percentage growth for each line during the 50-year timespan. I also calculated the ratio of \"top five percent\"-to-\"lowest quintile\" for 1967 and 2017. 1967: 17.5/1 2017: 29.0/1","tags":"Data Science","url":"data-science/us-mean-income.html","loc":"data-science/us-mean-income.html"},{"title":"LDS President Russell Nelson on Family","text":"Several friends and I were recently discussing whether Wendy Watson Nelson has affected the topics about which LDS President Russell Nelson has chosen to speak, so I decided to perform a quick analysis of his General Conference talks going back to 1995. First, though, for those unfamiliar with why we would be interested in this question, I'll give a bit of background. According to LDS Newsroom , President Russell Nelson and Wendy Watson Nelson were married April 6, 2006. Wendy Watson was President Nelson's second wife. His first wife was Dantzel White Nelson, who died February 12, 2005. Sister Wendy Watson Nelson was a professor of marriage and family therapy at BYU prior to her marriage to President Nelson, and had written several books about relationships, marriage, and family. Since they have been married, she, along with President Nelson, has spoken at several firesides and face-to-face events, most recently in Las Vegas, Nevada. She frequently provides marriage and relationship advice at these events. She is highly educated, has teaching experience in these topics, is willing to speak frequently on these topics, and is much younger than President Nelson. Naturally, we were curious as to what type of influence, if any, she might have on President Nelson's talks. Since President and Sister Nelson were married in April 2006, in performing my analysis I had initially thought I'd grab all of President Nelson's talks going back to 1995 so as to get a similar number of years pre-marriage as there are available post-marriage; however, I was unable to find any way on lds.org to sort President Nelson's talks chronologically. I had considered sucking down all of his talks from the site and sorting them myself, but was reluctant to do so due to potential loads that might place on the Church's web servers (there are a lot of talks). It just seemed like I'd be crossing some line, so I settled on General Conference talks. I downloaded all of President Nelson's General Conference talks going back to April 1995 and ran them through a tool that performs a word count on the text. I kept the top ten words used in each talk and added them to a data frame within a Python program. Finally, I filtered the talks for words associated with marriage and family (the areas of Sister Nelson's expertise), and then graphed them on a time series chart along with a reference line for the Nelson's marriage.","tags":"Data Science","url":"data-science/analyzing-lds-president-russell-nelson-talks-family.html","loc":"data-science/analyzing-lds-president-russell-nelson-talks-family.html"},{"title":"Analyzing Questions for Oaks and Ballard Face-to-Face","text":"There is an upcoming event in the LDS Church (Mormon Church) where two leaders from the Church's hierarchy will answer questions submitted by some of the young single adults in the Church. There are about 2,600 questions submitted thus far and they are posted to a website. I wrote a Python script to scrape the questions and do text analysis on their content. I stemmed and tokenized the words, ran them through a count vectorizer to get term counts, and then performed non-negative matrix factorization to group the texts into topics. I then performed NMF on subsets of the questions which had been filtered according to various topics or keywords. I posted my analysis at Wheat & Tares: Analyzing Ballard and Oaks Face-to-Face Questions","tags":"Data Science","url":"data-science/analyzing-oaks-ballard-face-to-face-questions.html","loc":"data-science/analyzing-oaks-ballard-face-to-face-questions.html"},{"title":"Good Nginx HTTPS Configuration","text":"When configuring a web server for HTTPS, it is important to ensure your web server's configuration doesn't undermine the use of an encrypted session by using poor ciphers or not negotiating keys properly. Here are some Nginx options for a solid HTTPS/SSL configuration. I'm not going to cover obtaining SSL certificates and will just assume you have some. If not, head over to Let's Encrypt and obtain one for free. Once you've got your certificates figured out, within the Nginx configuration, find the appropriate server block and add the following: server { listen 80 ; listen 443 ssl ; root / var / www / site ; ssl_certificate / path / to / cert / chain . pem ; ssl_certificate_key / path / to / cert / privkey . pem ; ssl_protocols TLSv1 . 2 ; ssl_prefer_server_ciphers on ; ssl_ciphers ECDHE - RSA - AES256 - GCM - SHA512 : DHE - RSA - AES256 - GCM - SHA512 : ECDHE - RSA - AES256 - GCM - SHA384 : DHE - RSA - AES256 - GCM - SHA384 : ECDHE - RSA - AES256 - SHA384 : ECDHE - RSA - AES256 - SHA : DHE - RSA - AES256 - SHA ; ssl_session_timeout 10 m ; ssl_session_cache shared : SSL : 10 m ; ssl_session_tickets off ; ssl_stapling on ; ssl_stapling_verify on ; ... } The first portion of the configuration tells the server on which ports to listen, the web root directory, and the paths to your SSL certificates. I'll briefly describe the other lines. ssl_protocols Here we list the protocols the server is allowed to negotiate. In this case, we are only negotiating TLSv1.2 or above. ssl_prefer_server_ciphers This specifies that server ciphers should be preferred over client ciphers, which helps prevent a malicious client (typically via a man-in-the-middle attack) from downgrading to a less secure cipher than you'd prefer. Enabling this forces the client to accept only from among the server's offered ciphers. ssl_ciphers The list of ciphers that will be supported for the HTTPS session. We only want strong ciphers here so keep this up-to-date as cryptography marches on. ssl_session_timeout This specifies the time during which a client may reuse the session parameters. Don't set this for too long. ssl_session_cache Specifies the types and sizes of caches that can be used to store session parameters. Here we are using a cache shared among all worker processes on the server and limiting the cache to 10 megabytes in size. ssl_session_tickets Specifies whether session resumption through the use of tickets is enabled or disabled. If enabled, according to the RFC , the \"TLS server encapsulates the session state into a ticket and forwards it to the client. The client can subsequently resume a session using the obtained ticket.\" The configuration I have specified disables this functionality. ssl_stapling We are enabling the stapling of OCSP responses, which allows the server to send the certificate of the server's certificate issuer, saving client from having to make more roundtrips, which can be detrimental on a bandwidth constrained client. ssl_stapling_verify Enables the verification of OCSP responses by the server. The other thing you'll want to do is to redirect all HTTP requests to HTTPS sites. This can easily be done with redirects in Nginx, even if you need to redirect multiple domains (e.g., you own the .com, .net, and .org TLDs for a domain and want them all to go to one TLD). server { listen 80 ; listen 443 ssl ; ... server_name example.com www.example.com example.org www.example.org example.net www.example.net ; if ($host = 'www.example.com') { rewrite &#94;/(.*)$ https : // example . com / $ 1 permanent ; } if ($ host = 'http://example.com' ) { rewrite &#94;/(.*)$ https : // example . com / $ 1 permanent ; } if ($ host = 'example.org' ) { rewrite &#94;/(.*)$ https : // example . com / $ 1 permanent ; } if ($ host = 'www.example.org' ) { rewrite &#94;/(.*)$ https : // example . com / $ 1 permanent ; } if ($ host = 'example.net' ) { rewrite &#94;/(.*)$ https : // example . com / $ 1 permanent ; } if ($ host = 'www.example.net' ) { rewrite &#94;/(.*)$ https : // example . com / $ 1 permanent ; } ... } After all this is done, head over to the SSL Server Test run by Qualys SSL Labs. Enter your site and see what grade you receive.","tags":"Cyber Security","url":"cyber-security/nginx-good-https-configuration.html","loc":"cyber-security/nginx-good-https-configuration.html"},{"title":"Lending Club Machine Learning Model and API","text":"This is an API that provides a probability of default when presented a loan from Lending Club. The API is written in Flask and it utilizes a scikit-learn machine learning model. You can get the code for this at the GitHub repo . Prerequisites Python 3 Flask Flask-RESTful numpy scipy pandas scikit-learn (0.19.0) - pickled model may be version dependent Installation Installation is completely up to you but it expects the typical Flask environment with the two pickled scikit-learn models in the same directory as the Flask app (this can be changed by modifying the joblib path within the app). Usage The API expects a JSON file conforming to the current format from Lending Club. There is an example JSON file called loanlist-example.json showing the format the model expects. There are three endpoints to the API: / (provides a readme/description) /version (provides a JSON output of the API version) /predict (this is the predictor) To use the API, POST a JSON file matching the format of the example file provided. Be sure to set your Content-Type to application\\json for the POST. The API will then load the loans into a Pandas DataFrame, make some modifications, and then run them through the Random Forest Classifier model. It then will add another column to the DataFrame for the predicted probability of default/charge-off. Finally, the API will then return JSON output of the memberId and probability of default for each loan that was input. Machine Learning Model The machine learning model is a Random Forest Classifier trained on all Lending Club loans from 2007 through the first half of 2017. It has the following parameters: RandomForestClassifier(bootstrap=True, class_weight='balanced', criterion='gini', max_depth=None, max_features='auto', max_leaf_nodes=None, min_impurity_split=1e-07, min_samples_leaf=5, min_samples_split=2, min_weight_fraction_leaf=0.0, n_estimators=100, n_jobs=3, oob_score=False, random_state=None, verbose=0, warm_start=False) Below is the confusion matrix followed by the accuracy, AUC, precision, and recall scores for the model: True Positive False Positive False Negative True Negative 74,319 4,546 1,870 16,393 Accuracy : 0.933942838316 Error : 0.0660571616836 AUC : 0.919982188297 Precision : 0.782893165863 Recall : 0.897607183924 If you are unfamiliar with a confusion matrix, in a binary decision such as whether an account is likely to default, the matrix lists in the first column the number of true positives over false positives. The second column lists the number of false negatives over true negatives. Ideally, one would like the numbers to be greatest going diagonally from top-left to bottom-right, with zeros in the other two cells. You can read more about a confusion matrix on Wikipedia . The two models used in the API are the following: Label Encoder Used for both the \"term\" and \"grade\" columns/features to encode them into labels. This, rather than one-hot encoding, was used due to the simplicity of the features and in an attempt to keep the feature size to a minimum (one of my goals was to enable this to run on a Raspberry Pi). It is important that this label encoder be loaded so that labels for new loans are consistent with those of the training set. Random Forest Classifier This model is a random forest classifier with 100 trees. It does the predicting, returning an array consisting of the probability a loan will not default along with the probability it will. The API is only returning the probability of default - the second field returned by the model. Performance The classifier is pretty quick and should work just fine on even a Raspberry Pi.","tags":"Data Science","url":"data-science/lending-club-default-predictor.html","loc":"data-science/lending-club-default-predictor.html"},{"title":"Utah Energy Production","text":"When I read so many articles about Utah's coal industry and the lack of real concern about coal-plant pollution in Utah, I reflect on this little chart I've had sitting around for some time now. I grabbed the data from Utah's Open Data Portal which, unfortunately, only has data up through 2013.","tags":"Data Science","url":"data-science/utah-energy-production.html","loc":"data-science/utah-energy-production.html"},{"title":"Configure Nginx to Protect Ghost Login Page","text":"In information security, it is not possible to be correct all the time - things will break, controls will fail, and software bugs will exist; those things are inevitable, so a key element of information security is to reduce the attack surface of a system. Wikipedia has a good definition of \"attack surface\": \"The attack surface of a software environment is the code within a computer system that can be run by unauthorized users. This includes, but is not limited to: user input fields, protocols, interfaces, and services. OSSTMM 3 Defines Attack Surface as 'The lack of specific separations and functional controls that exist for that vector'. One approach to improving information security is to reduce the attack surface of a system or software. By turning off unnecessary functionality, there are fewer security risks. By having less code available to unauthorized actors, there will tend to be fewer failures. Although attack surface reduction helps prevent security failures, it does not mitigate the amount of damage an attacker could inflict once a vulnerability is found.\" Ghost is some fantastic software but will inevitably have security vulnerabilities, especially in the complex pieces within the administration functions. It would be a good idea to reduce Ghost's attack surface by restricting what systems can even access the administrative portion of Ghost, and access controls within Nginx allow us to do so if we are using Nginx to proxy connections to Ghost. Access controls within Nginix are pretty straightforward. For example, if you want to allow a specific IP address to access a portion of your site, but deny all others, you'd define the location and access controls within the server block: server { ... location /mysecretlocation/ { allow 1.1.1.1; deny all; } ... } That's pretty straightforward, causing Nginx to allow connections to www.example.com/mysecretlocation by the IP address 1.1.1.1, while kicking a 403 Forbidden message to all others. This gets a little different when using Nginx to proxy connections to Ghost, but it is still pretty straightforward - we just need to add the proxy information to the location block, like this: server { ... location /ghost/ { allow 1.1.1.1 ; deny all ; proxy_set_header X-Real-IP $remote_addr ; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for ; proxy_set_header X-Forwarded-Proto $scheme ; proxy_set_header Host $http_host ; proxy_set_header Connection \"\" ; proxy_http_version 1.1 ; proxy_pass http : // ghost_upstream_defined_in_nginx_conf ; } ... } This config does the same thing as before but applies it to the proxy for Ghost, which is important since the URI of /ghost/signin doesn't actually exist in the website's directory root, but is only understood by Ghost. However, if an IP other than 1.1.1.1 were to go to www.mywebsite.com/ghost/signin, they would get a 403 Forbidden message. Now, when a vulnerability is identified that affects Ghost's administration functionality, the website's exposure to that vulnerability should be greatly reduced. If you have any feedback or questions, contact me on Twitter at @codyhatch until I get my contact page up on this site.","tags":"Cyber Security","url":"cyber-security/nginx-protect-ghost-login.html","loc":"cyber-security/nginx-protect-ghost-login.html"},{"title":"Nginx Tip - Remove Version Number","text":"I wanted to give another quick tip in the process of hardening the security of Nginx. There are a bunch of things one can do to manage and limit connections, and they're good, but something that is often overlooked is removing the version number of the web server. This isn't a security-through-obscurity thing, but rather taking whatever easy steps one can take to make things even a little bit tougher for an attacker. For example, if there is a vulnerability in a specific version of Nginx, it makes sense not to broadcast the version number running on one's server to the world, allowing anyone paying attention to easily determine whether your server is vulnerable. Of course, one can go to great lengths and change the server software name altogether by modifying Nginx's source code and recompiling, but I'm going to limit this suggestion to something that is easy and within the reach of every web admin out there. To configure Nginx to stop listing its version number in error pages and HTTP headers, add the following line to the server block in your configuration file: server_tokens : off ; That's all that needs to be done. Now, Nginx will only list the fact that it is an Nginx server, but exclude the version in HTTP headers and error pages.","tags":"Cyber Security","url":"cyber-security/nginx-remove-version-number.html","loc":"cyber-security/nginx-remove-version-number.html"}]};