<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Cody Hatch</title><link href="https://codyhatch.com/" rel="alternate"></link><link href="https://codyhatch.com/feeds/all.atom.xml" rel="self"></link><id>https://codyhatch.com/</id><updated>2021-09-06T05:35:00-06:00</updated><entry><title>US Federal Income and Spending</title><link href="https://codyhatch.com/data-science/us-federal-income-spending.html" rel="alternate"></link><published>2021-09-06T05:35:00-06:00</published><updated>2021-09-06T05:35:00-06:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2021-09-06:/data-science/us-federal-income-spending.html</id><summary type="html">&lt;p&gt;Charts showing United States federal government income and spending by category.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Part of being an informed citizen of the United States is to understand in what ways the federal government spends the money it collects, as well as the sources of government revenue. To aid in that understanding, I have provided two basic charts covering receipts and expenses for the US federal government. All amounts have been adjusted to 1995 dollars using CPI-U from the US Bureau of Labor Statistics.&lt;/p&gt;
&lt;div class="flourish-embed flourish-chart" data-src="visualisation/3958773" data-url="https://flo.uri.sh/visualisation/3958773/embed" aria-label=""&gt;&lt;script src="https://public.flourish.studio/resources/embed.js"&gt;&lt;/script&gt;&lt;/div&gt;

&lt;div class="flourish-embed flourish-chart" data-src="visualisation/3958865" data-url="https://flo.uri.sh/visualisation/3958865/embed" aria-label=""&gt;&lt;script src="https://public.flourish.studio/resources/embed.js"&gt;&lt;/script&gt;&lt;/div&gt;</content><category term="Data Science"></category><category term="US"></category><category term="politics"></category><category term="budgets"></category><category term="statistics"></category></entry><entry><title>Utah COVID-19 Statistics</title><link href="https://codyhatch.com/data-science/utah-covid19-stats.html" rel="alternate"></link><published>2021-01-10T22:00:00-07:00</published><updated>2021-01-10T22:00:00-07:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2021-01-10:/data-science/utah-covid19-stats.html</id><summary type="html">&lt;p&gt;Reviewing COVID-19 statistics for Utah.&lt;/p&gt;</summary><content type="html">&lt;p&gt;COVID-19 in Utah, like everywhere else, has been a story of tragedy and heroism (especially the healthcare workers, people staffing food banks, and other essential workers). I am interested in some basic statistics regarding the virus in Utah, which I have placed here along with some commentary; however, it is imperative to remember that every death and painful recovery creates a web of grief. These numbers represent human tragedy, so take a moment to reach out to a loved one you know has been affected, and remind them of your love for them.&lt;/p&gt;
&lt;div class="flourish-embed flourish-chart" data-src="visualisation/3957738" data-url="https://flo.uri.sh/visualisation/3957738/embed" aria-label=""&gt;&lt;script src="https://public.flourish.studio/resources/embed.js"&gt;&lt;/script&gt;&lt;/div&gt;

&lt;p&gt;I have heard many acquaintances advocate letting things play out to achieve herd immunity. While the numbers needing to be infected in order to achieve herd immunity vary with each virus, studies have predicted that COVID-19 would require approximately a 70% infection rate in order for a community to reach herd immunity. Currently in Utah there have been about 306,000 people infected and 1,393 fatalities, for a mortality rate of 0.46%. Utah has a population of 3,200,000 and 70% of that population would be 2,240,000. If 0.46% of that population were to die from the disease, it would represent 10,197 deaths - almost more than all other causes combined.&lt;/p&gt;
&lt;div class="flourish-embed flourish-chart" data-src="visualisation/3958146" data-url="https://flo.uri.sh/visualisation/3958146/embed" aria-label=""&gt;&lt;script src="https://public.flourish.studio/resources/embed.js"&gt;&lt;/script&gt;&lt;/div&gt;

&lt;p&gt;I also was curious how Utah's mortality rate stacks up against several other western states. Interestingly, Utah compares very favorably, especially considering the large population in metropolitan centers. I'm not sure why this is so, but it is interesting nonetheless.&lt;/p&gt;
&lt;div class="flourish-embed flourish-chart" data-src="visualisation/3958406" data-url="https://flo.uri.sh/visualisation/3958406/embed" aria-label=""&gt;&lt;script src="https://public.flourish.studio/resources/embed.js"&gt;&lt;/script&gt;&lt;/div&gt;</content><category term="Data Science"></category><category term="Utah"></category><category term="statistics"></category><category term="health"></category><category term="COVID"></category><category term="coronavirus"></category></entry><entry><title>Whose Image is This?</title><link href="https://codyhatch.com/religion/whose-image-is-this.html" rel="alternate"></link><published>2020-03-09T05:35:00-06:00</published><updated>2020-03-09T05:35:00-06:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2020-03-09:/religion/whose-image-is-this.html</id><summary type="html">&lt;p&gt;Discussing Jesus' reference to the image on a coin&lt;/p&gt;</summary><content type="html">&lt;p&gt;This past week I attended the Broadway musical Dear Evan Hansen, which was spectacular (one of the best musicals I’ve attended) largely because it spoke to the deep desire we have as humans to be seen and loved.&lt;/p&gt;
&lt;p&gt;It came on the heels of reading, earlier in the week, the account of the Pharisees and Herodians testing Jesus regarding the payment of taxes to Caesar. Mark 12:13-17 tells the story:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Then they sent to him some Pharisees and some Herodians to trap him in what he said. And they came and said to him, “Teacher, we know that you are sincere, and show deference to no one; for you do not regard people with partiality, but teach the way of God in accordance with truth. Is it lawful to pay taxes to the emperor, or not? Should we pay them, or should we not?” But knowing their hypocrisy, he said to them, “Why are you putting me to the test? Bring me a denarius and let me see it.” And they brought one. Then he said to them, “Whose head is this, and whose title?” They answered, “The emperor’s.” Jesus said to them, “Give to the emperor the things that are the emperor’s, and to God the things that are God’s.” And they were utterly amazed at him.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This story is usually referenced as an example of some sort of a two-tiered teaching on economics when people talk about the implications of Jesus’ social teachings. It is frequently used to suggest that God’s system is over there, and our economic system (usually captialism) is over here, separating the two. However, I’d like to look at it a bit differently, if possible, stemming from the comment that “they were utterly amazed at him,” because, to me, reading that text through the typical lens of separate economic systems just doesn’t seem to be that amazing. Why were the Pharisees and Herodians so amazed by this?&lt;/p&gt;
&lt;p&gt;The Pharisees and Herodians thought they were going to be clever and get Jesus to either repudiate the paying of tribute to the emperor, thus breaking the law and revolting against the emperor; or declare the legitimacy of Roman rule through the payment of taxes, placing himself at odds with the Jewish longing for Zion. Jesus, however, turns the tables on them by asking them to bring him a denarius (Roman coin).&lt;/p&gt;
&lt;p&gt;Jesus then asks the Pharisees and Herodians whose image is on the coin, and whose title. The Greek word here is εἰκών, or icon/image in English. His testers then state that it is Caesar’s image and title on the coin, so Jesus states that they should return to Caesar that which is Caesar’s property, at which point they become amazed.&lt;/p&gt;
&lt;p&gt;So, why are they amazed? I’d suggest the answer to that question requires a reference to Genesis 1:27:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;So God created humankind in his image, in the image of God he created them; male and female he created them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Here, in the LXX (Greek version of the Old Testament), the word translated as image is εἰκών, the same word used in Mark’s telling of the “render unto Caesar” story. So, if the coins with Caesar’s image on them are his property, then by extension humanity, which bears God’s image, not Caesar’s, is not. In one fell swoop Jesus emphasized that, while Caesar’s kingdom made claim to ultimately worthless material, God’s kingdom makes claim to all of humanity. And what does this King do with his possession? He gives them freedom, lavishes grace upon them, loves them, and gives his very life for them. Such a statement – along with its implications for economics, politics, and class – is truly amazing.&lt;/p&gt;</content><category term="Religion"></category><category term="Bible"></category><category term="economics"></category></entry><entry><title>Purse, Bag, and Sword</title><link href="https://codyhatch.com/religion/purse-bag-and-sword.html" rel="alternate"></link><published>2019-01-09T05:35:00-07:00</published><updated>2019-01-09T05:35:00-07:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2019-01-09:/religion/purse-bag-and-sword.html</id><summary type="html">&lt;p&gt;Reviewing the odd passage of the disciples of Jesus taking a sword&lt;/p&gt;</summary><content type="html">&lt;p&gt;In Luke’s Gospel, during the Passover meal, there is an interesting exchange between Jesus and his disciples, where Jesus seems to exhort them to sell their belongings in order to buy a sword. The text is frequently used to justify the acquisition of firearms and other weapons in arguments over the Second Amendment to the US Constitution; however, I’d like to explore a different interpretation of the verses.&lt;/p&gt;
&lt;p&gt;Here is the text:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;He said to them, “When I sent you out without a purse, bag, or sandals, did you lack anything?” They said, “No, not a thing.” He said to them, “But now, the one who has a purse must take it, and likewise a bag. And the one who has no sword must sell his cloak and buy one. For I tell you, this scripture must be fulfilled in me, ‘And he was counted among the lawless’; and indeed what is written about me is being fulfilled.” They said, “Lord, look, here are two swords.” He replied, “It is enough.”&lt;br /&gt;
&lt;strong&gt;Luke 22:35-38, NRSV&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There are several interesting things about these verses:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The commands here seem to be the opposite of Jesus’ earlier command at the time he sent his disciples out to preach, where he told them not to take their purse or bag, but to &lt;strong&gt;only&lt;/strong&gt; take their cloak.&lt;/li&gt;
&lt;li&gt;What does the command to buy a sword have to do with the fulfillment of scripture that Jesus will be counted among the lawless?&lt;/li&gt;
&lt;li&gt;If Jesus just finished telling the disciples to go and buy swords, why does he then say that two swords are sufficient?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, I’d like to examine the text of these verses more closely, as well as “zoom out” to get additional context. I think doing so will be very beneficial to understanding Jesus’ comments as presented here by Luke. Luke is trying to tell a story with a specific purpose, so it is important to keep that in mind. And remember, these are my ideas; I’m just exploring them and am not declaring this interpretation as definitive, though I find it quite persuasive.&lt;/p&gt;
&lt;p&gt;First, let’s “zoom out” and look at the context of these verses. Verses 7-13 have Jesus and his disciples preparing for the Passover meal. They acquired a room in a guest house and have sat down for a meal. This is the location and setting for the comments we are examining.&lt;/p&gt;
&lt;p&gt;Next, in verses 14-20, Jesus institutes the Lord’s Supper (i.e., Eucharist, Sacrament). This is important because Jesus is teaching his disciples about his upcoming sacrifice for them and the introduction of the new covenant (see Jeremiah 31:31-34) based on the imminent presence of God.&lt;/p&gt;
&lt;p&gt;Then, in verses 21-23 Jesus mentions that one of them will betray him. So Jesus has moved from a discussion of his own sacrifice to the topic of betrayal. In verses 24-30 the disciples begin discussing who is the greatest among them. You can kind of see how the conversation is flowing, as Luke draws out conversations key to his narrative. They’ve moved from Jesus talking about his sacrifice; then betrayal; and then the disciples arguing about who will be the greatest among them, causing Jesus to bring them back to the sacrifice motif.&lt;/p&gt;
&lt;p&gt;Next, verses 31-34 return to a topic similar in nature to betrayal: denial – specifically, Peter’s denial of Jesus. Jesus says, “Simon, Simon, listen! Satan has demanded to sift all of you like wheat, but I have prayed for you that your own faith may not fail; and you, when once you have turned back, strengthen your brothers.” Peter then exclaims that he is willing to go anywhere Jesus goes, including death, at which point Jesus predicts that Peter will, in fact, deny that he even knew Jesus.&lt;/p&gt;
&lt;p&gt;Now we move to the verses in question. Jesus then &lt;strong&gt;turns to the rest of the disciples&lt;/strong&gt; and asks them if, when he had sent them out previously – without purse, bag, or sandals – they had lacked anything. They reply that they did not lack anything. He then tells them that they will be taking their purse and bag, and that the one thing he had previously told them to take – their cloak – he tells them they will sell for a sword. This is completely backward to what he had previously told them to do &lt;strong&gt;when they represented him&lt;/strong&gt;. It is also opposite his previous description of those who make up the Kingdom of God: those who turn the other cheek, pray for their enemies, etc.; and opposite his statement that those who live by the sword will die by the sword.&lt;/p&gt;
&lt;p&gt;So what’s going on? Keep in mind that we are still on the topic of betrayal/denial, contrasted with the example of Jesus’ sacrifice. I think this statement is Jesus’ description of how his entire set of disciples will deny him. They will reject all that the kingdom consists of and revert to the ways of this world: self-preservation, seeking after greatness, etc. So just as Peter will outright deny Jesus, the entire group of disciples will also do so by embracing the ways of this world, specifically taking up the sword, which is a means of &lt;strong&gt;self&lt;/strong&gt; defense and oppression. It is not the way of Jesus or of the kingdom, which is why it fulfills scripture, counting Jesus among transgressors, for in doing so his disciples have become transgressors/lawless! In fact, the verse here quoted by Jesus is from Isaiah 53, which is one of the Suffering Servant texts from Isaiah (I highly recommend you read the chapter). It is in that chapter where we are told we are healed by Jesus’ stripes; in other words, we’re not healed by taking up the sword. This will become more clear below.&lt;/p&gt;
&lt;p&gt;The disciples then tell Jesus that they’ve already got two swords at hand, which Jesus indicates is enough. Clearly Jesus isn’t exhorting them to violence to defend themselves against Rome or religious authorities, for two swords would never be enough in such a situation; however, two swords are enough to become transgressors against the Kingdom of God.&lt;/p&gt;
&lt;p&gt;Jesus and his disciples then, in verses 39-46, move to the Mount of Olives where Jesus prays and the disciples fall asleep. When he finishes he awakes them and says, “Get up and pray that you may not come into the time of trial.” This statement reminds us of the Lord’s Prayer, where we are to specifically ask that we not be led “into the time of trial, but deliver us from evil.” What evil is being spoken of? I think we are about to find out.&lt;/p&gt;
&lt;p&gt;Verses 47-53 recount Jesus’ betrayal by Judas and subsequent arrest. A “crowd” comes, Judas kisses Jesus on the cheek in order to identify him. The key part of the narrative then follows:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When those who were around him [Jesus] saw what was coming, &lt;strong&gt;they&lt;/strong&gt; asked, “Lord, should we strike with the &lt;strong&gt;sword&lt;/strong&gt;?” Then one of &lt;strong&gt;them&lt;/strong&gt; struck the slave of the high priest and cut off his right ear. But Jesus said, “No more of this!” And he touched his ear and &lt;strong&gt;healed&lt;/strong&gt; him.&lt;br /&gt;
&lt;strong&gt;Luke 22:49-51 NRSV [Emphasis mine]&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Here, the disciples (Luke uses the terms “those” and “them” here) revert to the use of the sword to defend Jesus. Jesus says, “No more of this,” reaches out, and heals the person struck by the sword. Here we have the dichotomy that was setup earlier, where the disciples revert to the ways of the world, striking out in violence, and Jesus shows that it is &lt;strong&gt;his way&lt;/strong&gt; which brings healing. As Isaiah 53 says, speaking of the Servant, “They made his grave with the wicked and his tomb with the rich, &lt;strong&gt;although he had done no violence…&lt;/strong&gt;” Earlier, the text says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;All we like sheep have gone astray; we have all turned to our own way, and the Lord has laid on him the iniquity of us all.&lt;br /&gt;
&lt;strong&gt;Isaiah 53:6 NRSV&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And in verse five it says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;But he was wounded for our transgressions, crushed for our iniquities; upon him was the punishment that made us whole, and by his bruises we are healed.&lt;br /&gt;
&lt;strong&gt;Isaiah 53:5 NRSV&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Perhaps this is why Luke alluded to the Lord’s Prayer. The “time of trial” appears to be the choice to follow the way of Jesus, or the way of this world. Love vs. violence. We pray to be delivered from evil/”the evil one”/”the lawless one”, who appears when we resort to the ways of this world, accuse others, and reject the way of the Kingdom. Instead, we should be seeking God’s Kingdom to come, and for his will to be done here on earth, as it is in heaven.&lt;/p&gt;
&lt;p&gt;One of the interesting aspects of the text here is that Luke, in verses 54-62, places Peter’s denial of Jesus directly after the previous arrest sequence, forming what appears to be a chiasmus:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Jesus predicts Peter’s denial&lt;ul&gt;
&lt;li&gt;Jesus predicts disciples’ denial&lt;ul&gt;
&lt;li&gt;Jesus prays for deliverance but obeys the Father&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Disciples deny Jesus by resorting to the sword&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Peter denies Jesus&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I think Luke is demonstrating the futility of our way as compared to the way of Jesus. We are all transgressors and have, in our own way, denied Jesus, just as all of the disciples did that night. However, it is through Jesus that we too are healed. Just as the servant healed by Jesus’ hand had come with the crowd, bearing clubs and swords, only to be healed by Jesus, we too may find ourselves healed by Jesus in the midst of our transgressions, learning that truly we must not live by the sword or seek after wealth (purse), but rather by radical love.&lt;/p&gt;</content><category term="Religion"></category><category term="Bible"></category></entry><entry><title>US Mean Income</title><link href="https://codyhatch.com/data-science/us-mean-income.html" rel="alternate"></link><published>2018-09-24T04:00:00-06:00</published><updated>2018-09-24T04:00:00-06:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2018-09-24:/data-science/us-mean-income.html</id><summary type="html">&lt;p&gt;Graphing the growing income disparity between 1967 and 2017.&lt;/p&gt;</summary><content type="html">&lt;p&gt;There is a growing income disparity in the United States, which I find very worrisome. It doesn't seem sustainable and creates a nation of haves and have-nots.&lt;/p&gt;
&lt;p&gt;The graph below shows US mean household income, in 2017 CPI adjusted dollars, from 1967 to 2017. It is broken into quintiles and includes the top five percent of earners for comparison. I’ve also added the percentage growth for each line during the 50-year timespan.&lt;/p&gt;
&lt;p&gt;I also calculated the ratio of “top five percent”-to-“lowest quintile” for 1967 and 2017.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;1967:&lt;/strong&gt; 17.5/1&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2017:&lt;/strong&gt; 29.0/1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="svg" src="https://codyhatch.com/images/us-mean-income.svg"&gt;&lt;/p&gt;</content><category term="Data Science"></category><category term="US"></category><category term="economy"></category><category term="income"></category></entry><entry><title>Christian Meditation Using Lectio Divina</title><link href="https://codyhatch.com/religion/christian-meditation-using-lectio-divina.html" rel="alternate"></link><published>2018-07-25T05:35:00-06:00</published><updated>2018-07-25T05:35:00-06:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2018-07-25:/religion/christian-meditation-using-lectio-divina.html</id><summary type="html">&lt;p&gt;How to use Lectio Divina for Christian meditation&lt;/p&gt;</summary><content type="html">&lt;p&gt;Recently I spent the day swimming with my family. I had taken the day off work and, prior to leaving for the swimming pool we did some chores, prepared our lunches, and gathered our swimming supplies. I was feeling a bit grumpy that day and was quick to get frustrated or upset with my kids. Of course, my anger was justified in my mind by each of their infractions, but later in the day my son asked me why I had been so upset all day. He felt like he couldn’t get anything right, and that I was bothered by them (the kids) all day when I should have been happy to have spent the day swimming with them. My son had a point so I apologized, but after further reflection I realized that I had been a bit grumpy for some time.&lt;/p&gt;
&lt;p&gt;I know we all have our moments like that, where we get easily bothered by little, trivial things, but I decided to take stock of my routines to see if there was something contributing to my edginess. After some reflection I realized that it had been over a week since I had done my regular daily prayer and meditation routine, so I returned to my regular routine and it has made a big difference in how I interact with others, my blood pressure is markedly lower, and I feel more “grounded”, for lack of a better term. It has served as a reminder to me of the importance of consistency in prayer and meditation for my wellbeing, which got me thinking that I should share my current practice here, in case it might benefit someone else.&lt;/p&gt;
&lt;p&gt;There are two primary components of my prayer and meditation practice: the Anglican Daily Office and the meditation practice of &lt;em&gt;Lectio Divina&lt;/em&gt;. I’m not going to spend much time discussing the Anglican Daily Office (though you can read about it &lt;a href="https://www.stnicholasferrar.com/wp/wp-content/uploads/2020/07/SSNF-Office-Guide-2019.11.08.pdf"&gt;here&lt;/a&gt;), but will instead focus on &lt;em&gt;Lectio Divina&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;The term &lt;em&gt;Lectio Divina&lt;/em&gt; is Latin for “divine reading” and is a form of scripture-based meditation intended to treat the scriptures not as texts to be academically studied, but as the “Living Word” where one can come to know the presence of God. It has its informal beginnings with Origen (3rd century) and others who viewed scripture as a means by which one can come to know the meaning behind the words of the text, and thus come to know God. The desert fathers of the 4th century focused on repetitive scripture reading so that one would always have the scriptures in mind. However, it wasn’t until Saint Benedict and the Benedictine order that the concept of &lt;em&gt;Lectio Divina&lt;/em&gt; would come to be more formalized, for it functioned as a critical component of the monastic life of a Benedictine monastery, where, in addition to liturgical prayer and manual labor, monks were expected to engage in prayerful reading of the Bible.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Lectio Divina&lt;/em&gt; is composed of four phases, which I’ll outline below.&lt;/p&gt;
&lt;h2&gt;First Phase: Read&lt;/h2&gt;
&lt;p&gt;The first phase of &lt;em&gt;Lectio Divina&lt;/em&gt; is the reading of scripture. This is typically done following a period of preparation, which might consist of prayer, but the point is to achieve some level of stillness prior to beginning the reading of scripture. It may seem kind of trivial to take the time to achieve stillness, but I have found this to be a critical component of the overall process because it removes distractions. I usually go to a quiet place and offer some prayers in order to orient my mind toward that which I’m going to do. Since I utilize the Anglican Daily Office, prayer and preparation is naturally part of the process.&lt;/p&gt;
&lt;p&gt;Once you’ve taken some time to quiet yourself, select some portion of scripture and read it. You may choose a verse, multiple verses, or whatever feels right at the time, but I usually don’t read longer than a dozen or so verses, depending on the natural stopping points in what I’m reading. The point isn’t to plow through the scriptures but to let them speak to you, so keeping the length at something one can ponder is a pretty good idea.&lt;/p&gt;
&lt;p&gt;After the scriptures are chosen, you engage in a slow and gradual reading of the scriptures, sometimes repeating the reading a few times. Try to clear your mind of preconceived biases about the text, the chasing of footnotes, etc.; instead, just slowly read the words and let them speak to you. I find it useful to read from unmarked text so as not to remind myself of previous notes or ideas related to the text. I’d rather have an open mind at each pass.&lt;/p&gt;
&lt;h2&gt;Second Phase: Meditation&lt;/h2&gt;
&lt;p&gt;The point of &lt;em&gt;Lectio Divina&lt;/em&gt; is to listen to the message of the text as God’s “Living Word”. The point of the exercise is to commune with God so, the second phase of &lt;em&gt;Lectio Divina&lt;/em&gt; entails meditating and pondering upon the passages of scripture you have read. As you ponder pay attention to which words or phrases from the text stand out to you. This isn’t a time for academic reflection, but rather a time to let the Holy Spirit speak to your heart. What stands out to you?&lt;/p&gt;
&lt;p&gt;I frequently utilize the Anglican Daily Office lectionary when I practice Lectio Divina. For example, yesterday’s Gospel reading was Matthew 26:47-56.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;While he was still speaking, Judas, one of the twelve, arrived; with him was a large crowd with swords and clubs, from the chief priests and the elders of the people. Now the betrayer had given them a sign, saying, “The one I will kiss is the man; arrest him.” At once he came up to Jesus and said, “Greetings, Rabbi!” and kissed him. Jesus said to him, “Friend, do what you are here to do.”Then they came and laid hands on Jesus and arrested him. Suddenly, one of those with Jesus put his hand on his sword, drew it, and struck the slave of the high priest, cutting off his ear. Then Jesus said to him, “Put your sword back into its place; for all who take the sword will perish by the sword. Do you think that I cannot appeal to my Father, and he will at once send me more than twelve legions of angels? But how then would the scriptures be fulfilled, which say it must happen in this way?” At that hour Jesus said to the crowds, “Have you come out with swords and clubs to arrest me as though I were a bandit? Day after day I sat in the temple teaching, and you did not arrest me. But all this has taken place, so that the scriptures of the prophets may be fulfilled.” Then all the disciples deserted him and fled.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As I read through the text multiple times and meditated upon it, my mind focused on the phrase “for all who take the sword will perish by the sword.”&lt;/p&gt;
&lt;h2&gt;Third Phase: Pray&lt;/h2&gt;
&lt;p&gt;The third phase of &lt;em&gt;Lectio Divina&lt;/em&gt; consists of prayer about the word or phrase that was impressed upon your mind. Prayer is meant to be a dialogue with God, so, in my example, I prayed for peace in our communities. I prayed for an end to war, violence and bloodshed. I prayed that I may lose any desire I may have for violence or revenge; that I may seek to understand others rather than demonize or attack them; and for inspiration that I may do my part in bringing peace to my home and community.&lt;/p&gt;
&lt;h2&gt;Fourth Phase: Contemplation&lt;/h2&gt;
&lt;p&gt;In the fourth phase of &lt;em&gt;Lectio Divina&lt;/em&gt; one moves into contemplative prayer, where the purpose is to just “be there” and quietly commune with God. The intention is to clear one’s mind of all distractions and just focus on the message impressed upon your mind during the second phase. I frequently struggle to quiet my mind and not have it wander off into thinking about my day or tasks I might have outstanding. To combat this, when I notice my mind wandering from the topic at hand, I repeat the word or phrase that was impressed upon my mind in the second phase. Some days, it may take multiple repetitions to get my mind back on track, but my goal is to move from the dialogue-like prayer of the third phase to a quiet contemplation where I clear my mind of distractions and simply listen to God.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;So, those are the essentials of the meditative practice of Lectio Divina. It is a pretty simple process and can be easily integrated into the typical practice of LDS scripture reading. It may take as little as five or so minutes, to as long as one has time. I find that some days are more fruitful than others, but the fruitful days can be amazing, where I simply don’t want to stop and move on with my day. However, I believe the call of the Christian is not to be holed up like a hermit in meditative prayer all day, but to go out to the world and be the hands and legs of God in our communities. &lt;em&gt;Lectio Divina&lt;/em&gt; helps me to clear my mind of distractions and center myself on God. It has been a beneficial spiritual practice in my life, most critically as I underwent a faith transition many years ago. I hope it can be as useful to you.&lt;/p&gt;</content><category term="Religion"></category><category term="lectio divina"></category><category term="meditation"></category><category term="contemplative prayer"></category><category term="prayer"></category></entry><entry><title>LDS President Russell Nelson on Family</title><link href="https://codyhatch.com/data-science/analyzing-lds-president-russell-nelson-talks-family.html" rel="alternate"></link><published>2018-02-20T23:00:00-07:00</published><updated>2018-02-20T23:00:00-07:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2018-02-20:/data-science/analyzing-lds-president-russell-nelson-talks-family.html</id><summary type="html">&lt;p&gt;Analyzing the frequency family-oriented topics are discussed by LDS President Russell Nelson&lt;/p&gt;</summary><content type="html">&lt;p&gt;Several friends and I were recently discussing whether Wendy Watson Nelson has affected the topics about which LDS President Russell Nelson has chosen to speak, so I decided to perform a quick analysis of his General Conference talks going back to 1995.&lt;/p&gt;
&lt;p&gt;First, though, for those unfamiliar with why we would be interested in this question, I’ll give a bit of background. According to &lt;a href="https://www.mormonnewsroom.org/article/elder-russell-m.-nelson-marries-wendy-l.-watson"&gt;LDS Newsroom&lt;/a&gt;, President Russell Nelson and Wendy Watson Nelson were married April 6, 2006. Wendy Watson was President Nelson’s second wife. His first wife was Dantzel White Nelson, who died February 12, 2005.&lt;/p&gt;
&lt;p&gt;Sister Wendy Watson Nelson was a professor of marriage and family therapy at BYU prior to her marriage to President Nelson, and had written several books about relationships, marriage, and family. Since they have been married, she, along with President Nelson, has spoken at several firesides and face-to-face events, most recently in Las Vegas, Nevada. She frequently provides marriage and relationship advice at these events. She is highly educated, has teaching experience in these topics, is willing to speak frequently on these topics, and is much younger than President Nelson. Naturally, we were curious as to what type of influence, if any, she might have on President Nelson’s talks.&lt;/p&gt;
&lt;p&gt;Since President and Sister Nelson were married in April 2006, in performing my analysis I had initially thought I’d grab all of President Nelson’s talks going back to 1995 so as to get a similar number of years pre-marriage as there are available post-marriage; however, I was unable to find any way on lds.org to sort President Nelson’s talks chronologically. I had considered sucking down all of his talks from the site and sorting them myself, but was reluctant to do so due to potential loads that might place on the Church’s web servers (there are a lot of talks). It just seemed like I’d be crossing some line, so I settled on General Conference talks. I downloaded all of President Nelson’s General Conference talks going back to April 1995 and ran them through a tool that performs a word count on the text. I kept the top ten words used in each talk and added them to a data frame within a Python program. Finally, I filtered the talks for words associated with marriage and family (the areas of Sister Nelson’s expertise), and then graphed them on a time series chart along with a reference line for the Nelson’s marriage.&lt;/p&gt;
&lt;p&gt;&lt;img alt="svg" src="https://codyhatch.com/images/pres-nelson-family.svg"&gt;&lt;/p&gt;</content><category term="Data Science"></category><category term="Religion"></category><category term="data science"></category></entry><entry><title>Analyzing Questions for Oaks and Ballard Face-to-Face</title><link href="https://codyhatch.com/data-science/analyzing-oaks-ballard-face-to-face-questions.html" rel="alternate"></link><published>2017-11-16T19:00:00-07:00</published><updated>2017-11-16T19:00:00-07:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2017-11-16:/data-science/analyzing-oaks-ballard-face-to-face-questions.html</id><summary type="html">&lt;p&gt;Analyzing the questions submitted for the Oaks and Ballard LDS Face-to-Face event&lt;/p&gt;</summary><content type="html">&lt;p&gt;There is an upcoming event in the LDS Church (Mormon Church) where two leaders from the Church's hierarchy will answer questions submitted by some of the young single adults in the Church. There are about 2,600 questions submitted thus far and they are posted to a website. I wrote a Python script to scrape the questions and do text analysis on their content.&lt;/p&gt;
&lt;p&gt;I stemmed and tokenized the words, ran them through a count vectorizer to get term counts, and then performed &lt;a href="http://scikit-learn.org/stable/modules/decomposition.html#nmf"&gt;non-negative matrix factorization&lt;/a&gt; to group the texts into topics. I then performed NMF on subsets of the questions which had been filtered according to various topics or keywords.&lt;/p&gt;
&lt;p&gt;I posted my analysis at Wheat &amp;amp; Tares:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://wheatandtares.org/2017/11/15/analyzing-ballard-and-oaks-face-to-face-questions/"&gt;Analyzing Ballard and Oaks Face-to-Face Questions&lt;/a&gt;&lt;/p&gt;</content><category term="Data Science"></category><category term="Religion"></category><category term="data science"></category></entry><entry><title>Good Nginx HTTPS Configuration</title><link href="https://codyhatch.com/cyber-security/nginx-good-https-configuration.html" rel="alternate"></link><published>2017-10-05T22:30:00-06:00</published><updated>2017-10-05T22:30:00-06:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2017-10-05:/cyber-security/nginx-good-https-configuration.html</id><summary type="html">&lt;p&gt;How to configure Nginx to score well on Qualys SSL Labs Test.&lt;/p&gt;</summary><content type="html">&lt;p&gt;When configuring a web server for HTTPS, it is important to ensure your web server's configuration doesn't undermine the use of an encrypted session by using poor ciphers or not negotiating keys properly. Here are some Nginx options for a solid HTTPS/SSL configuration.&lt;/p&gt;
&lt;p&gt;I'm not going to cover obtaining SSL certificates and will just assume you have some. If not, head over to &lt;a href="https://letsencrypt.org"&gt;Let's Encrypt&lt;/a&gt; and obtain one for free.&lt;/p&gt;
&lt;p&gt;Once you've got your certificates figured out, within the Nginx configuration, find the appropriate server block and add the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;listen&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;listen&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mi"&gt;443&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ssl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ssl_certificate&lt;/span&gt;&lt;span class="w"&gt;             &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;chain&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pem&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ssl_certificate_key&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;privkey&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pem&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ssl_protocols&lt;/span&gt;&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="n"&gt;TLSv1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ssl_prefer_server_ciphers&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ssl_ciphers&lt;/span&gt;&lt;span class="w"&gt;                 &lt;/span&gt;&lt;span class="n"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;AES256&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;SHA512&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;DHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;AES256&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;SHA512&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;AES256&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;SHA384&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;DHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;AES256&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;SHA384&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;AES256&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;SHA384&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;AES256&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;SHA&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;DHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;AES256&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;SHA&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ssl_session_timeout&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ssl_session_cache&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;SSL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ssl_session_tickets&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;off&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ssl_stapling&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;ssl_stapling_verify&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The first portion of the configuration tells the server on which ports to listen, the web root directory, and the paths to your SSL certificates. I'll briefly describe the other lines.&lt;/p&gt;
&lt;h4&gt;ssl_protocols&lt;/h4&gt;
&lt;p&gt;Here we list the protocols the server is allowed to negotiate. In this case, we are only negotiating TLSv1.2 or above.&lt;/p&gt;
&lt;h4&gt;ssl_prefer_server_ciphers&lt;/h4&gt;
&lt;p&gt;This specifies that server ciphers should be preferred over client ciphers, which helps prevent a malicious client (typically via a man-in-the-middle attack) from downgrading to a less secure cipher than you'd prefer. Enabling this forces the client to accept only from among the server's offered ciphers.&lt;/p&gt;
&lt;h4&gt;ssl_ciphers&lt;/h4&gt;
&lt;p&gt;The list of ciphers that will be supported for the HTTPS session. We only want strong ciphers here so keep this up-to-date as cryptography marches on.&lt;/p&gt;
&lt;h4&gt;ssl_session_timeout&lt;/h4&gt;
&lt;p&gt;This specifies the time during which a client may reuse the session parameters. Don't set this for too long.&lt;/p&gt;
&lt;h4&gt;ssl_session_cache&lt;/h4&gt;
&lt;p&gt;Specifies the types and sizes of caches that can be used to store session parameters. Here we are using a cache shared among all worker processes on the server and limiting the cache to 10 megabytes in size.&lt;/p&gt;
&lt;h4&gt;ssl_session_tickets&lt;/h4&gt;
&lt;p&gt;Specifies whether session resumption through the use of tickets is enabled or disabled. If enabled, according to the &lt;a href="https://tools.ietf.org/html/rfc5077"&gt;RFC&lt;/a&gt;, the "TLS server encapsulates the session state into a ticket and forwards it to the client.  The client can subsequently resume a session using the obtained ticket." The configuration I have specified disables this functionality.&lt;/p&gt;
&lt;h4&gt;ssl_stapling&lt;/h4&gt;
&lt;p&gt;We are enabling the stapling of OCSP responses, which allows the server to send the certificate of the server's certificate issuer, saving client from having to make more roundtrips, which can be detrimental on a bandwidth constrained client.&lt;/p&gt;
&lt;h4&gt;ssl_stapling_verify&lt;/h4&gt;
&lt;p&gt;Enables the verification of OCSP responses by the server.&lt;/p&gt;
&lt;p&gt;The other thing you'll want to do is to redirect all HTTP requests to HTTPS sites. This can easily be done with redirects in Nginx, even if you need to redirect multiple domains (e.g., you own the .com, .net, and .org TLDs for a domain and want them all to go to one TLD).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;listen&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="err"&gt;80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;listen&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="err"&gt;443&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;ssl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;...&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;server_name&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;example.com&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;www.example.com&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;example.org&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;www.example.org&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;example.net&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;www.example.net&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;($host&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;www.example.com&amp;#39;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;rewrite&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;^/(.*)$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;permanent&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;($&lt;/span&gt;&lt;span class="nt"&gt;host&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;http://example.com&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;rewrite&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;^/(.*)$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;permanent&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;($&lt;/span&gt;&lt;span class="nt"&gt;host&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;example.org&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;rewrite&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;^/(.*)$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;permanent&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;($&lt;/span&gt;&lt;span class="nt"&gt;host&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;www.example.org&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;rewrite&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;^/(.*)$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;permanent&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;($&lt;/span&gt;&lt;span class="nt"&gt;host&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;example.net&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;rewrite&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;^/(.*)$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;permanent&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;($&lt;/span&gt;&lt;span class="nt"&gt;host&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;www.example.net&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;rewrite&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;^/(.*)$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;permanent&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;After all this is done, head over to the &lt;a href="https://www.ssllabs.com/ssltest/"&gt;SSL Server Test&lt;/a&gt; run by Qualys SSL Labs. Enter your site and see what grade you receive.&lt;/p&gt;</content><category term="Cyber Security"></category><category term="Application"></category><category term="web"></category><category term="cyber security"></category></entry><entry><title>Lending Club Machine Learning Model and API</title><link href="https://codyhatch.com/data-science/lending-club-default-predictor.html" rel="alternate"></link><published>2017-08-23T17:35:00-06:00</published><updated>2017-08-23T17:35:00-06:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2017-08-23:/data-science/lending-club-default-predictor.html</id><summary type="html">&lt;p&gt;Lending Club machine learning model and API for predicting loan defaults&lt;/p&gt;</summary><content type="html">&lt;p&gt;This is an API that provides a probability of default when presented a loan from Lending Club. The API is written in Flask and it utilizes a scikit-learn machine learning model.&lt;/p&gt;
&lt;p&gt;You can get the code for this at the &lt;a href="https://github.com/orangganjil/lendingclub-default-predictor"&gt;GitHub repo&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Prerequisites&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Python 3&lt;/li&gt;
&lt;li&gt;Flask&lt;/li&gt;
&lt;li&gt;Flask-RESTful&lt;/li&gt;
&lt;li&gt;numpy&lt;/li&gt;
&lt;li&gt;scipy&lt;/li&gt;
&lt;li&gt;pandas&lt;/li&gt;
&lt;li&gt;scikit-learn (0.19.0) - pickled model may be version dependent&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;Installation is completely up to you but it expects the typical Flask environment with the two pickled scikit-learn models in the same directory as the Flask app (this can be changed by modifying the joblib path within the app).&lt;/p&gt;
&lt;h2&gt;Usage&lt;/h2&gt;
&lt;p&gt;The API expects a JSON file conforming to the current format from Lending Club. There is an example JSON file called &lt;code&gt;loanlist-example.json&lt;/code&gt; showing the format the model expects.&lt;/p&gt;
&lt;p&gt;There are three endpoints to the API:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;/ (provides a readme/description)&lt;/li&gt;
&lt;li&gt;/version (provides a JSON output of the API version)&lt;/li&gt;
&lt;li&gt;/predict (this is the predictor)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To use the API, POST a JSON file matching the format of the example file provided. Be sure to set your Content-Type to &lt;code&gt;application\json&lt;/code&gt; for the POST.&lt;/p&gt;
&lt;p&gt;The API will then load the loans into a Pandas DataFrame, make some modifications, and then run them through the Random Forest Classifier model. It then will add another column to the DataFrame for the predicted probability of default/charge-off. Finally, the API will then return JSON output of the memberId and probability of default for each loan that was input.&lt;/p&gt;
&lt;h2&gt;Machine Learning Model&lt;/h2&gt;
&lt;p&gt;The machine learning model is a Random Forest Classifier trained on all Lending Club loans from 2007 through the first half of 2017. It has the following parameters:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;RandomForestClassifier(bootstrap=True, class_weight=&amp;#39;balanced&amp;#39;,
            criterion=&amp;#39;gini&amp;#39;, max_depth=None, max_features=&amp;#39;auto&amp;#39;,
            max_leaf_nodes=None, min_impurity_split=1e-07,
            min_samples_leaf=5, min_samples_split=2,
            min_weight_fraction_leaf=0.0, n_estimators=100, n_jobs=3,
            oob_score=False, random_state=None, verbose=0,
            warm_start=False)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Below is the confusion matrix followed by the accuracy, AUC, precision, and recall scores for the model:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;True Positive &lt;br&gt;False Positive&lt;/th&gt;
&lt;th align="left"&gt;False Negative &lt;br&gt;True Negative&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;74,319&lt;/td&gt;
&lt;td align="left"&gt;4,546&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;1,870&lt;/td&gt;
&lt;td align="left"&gt;16,393&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Accuracy&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.933942838316&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0660571616836&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;AUC&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.919982188297&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;Precision&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.782893165863&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;Recall&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.897607183924&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you are unfamiliar with a confusion matrix, in a binary decision such as whether an account is likely to default, the matrix lists in the first column the number of true positives over false positives. The second column lists the number of false negatives over true negatives. Ideally, one would like the numbers to be greatest going diagonally from top-left to bottom-right, with zeros in the other two cells.&lt;/p&gt;
&lt;p&gt;You can read more about a confusion matrix on &lt;a href="https://en.wikipedia.org/wiki/Confusion_matrix"&gt;Wikipedia&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The two models used in the API are the following:&lt;/p&gt;
&lt;h4&gt;Label Encoder&lt;/h4&gt;
&lt;p&gt;Used for both the "term" and "grade" columns/features to encode them into labels. This, rather than one-hot encoding, was used due to the simplicity of the features and in an attempt to keep the feature size to a minimum (one of my goals was to enable this to run on a Raspberry Pi). It is important that this label encoder be loaded so that labels for new loans are consistent with those of the training set.&lt;/p&gt;
&lt;h4&gt;Random Forest Classifier&lt;/h4&gt;
&lt;p&gt;This model is a random forest classifier with 100 trees. It does the predicting, returning an array consisting of the probability a loan will not default along with the probability it will. The API is only returning the probability of default - the second field returned by the model.&lt;/p&gt;
&lt;h3&gt;Performance&lt;/h3&gt;
&lt;p&gt;The classifier is pretty quick and should work just fine on even a Raspberry Pi.&lt;/p&gt;</content><category term="Data Science"></category><category term="Machine Learning"></category><category term="lending club"></category><category term="defaults"></category></entry><entry><title>Utah Energy Production</title><link href="https://codyhatch.com/data-science/utah-energy-production.html" rel="alternate"></link><published>2016-09-14T19:35:00-06:00</published><updated>2016-09-14T19:35:00-06:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2016-09-14:/data-science/utah-energy-production.html</id><summary type="html">&lt;p&gt;Discussing the sources of Utah's energy production between 1990 and 2013.&lt;/p&gt;</summary><content type="html">&lt;p&gt;When I read &lt;a href="http://www.sltrib.com/home/3641085-155/utah-legislature-oks-53-million-cash"&gt;so&lt;/a&gt; &lt;a href="http://www.sltrib.com/home/3699366-155/proponents-buried-coals-role-in-oakland"&gt;many&lt;/a&gt; &lt;a href="http://www.sltrib.com/home/3911450-155/miners-fear-federal-coal-reforms-jeopardize"&gt;articles&lt;/a&gt; &lt;a href="http://www.sltrib.com/home/3423489-155/obama-administration-halts-new-coal-leases"&gt;about&lt;/a&gt; &lt;a href="http://www.sltrib.com/opinion/3362446-155/op-ed-coal-to-liquid-project-shows-utah-still"&gt;Utah's&lt;/a&gt; &lt;a href="http://www.sltrib.com/home/2953530-155/environmentalists-sue-to-halt-sanpete-county"&gt;coal industry&lt;/a&gt; and the lack of real concern about &lt;a href="http://www.sltrib.com/home/3464221-155/crowd-of-deeply-divided-utahns-pack"&gt;coal-plant pollution&lt;/a&gt; in Utah, I reflect on this little chart I've had sitting around for some time now.&lt;/p&gt;
&lt;p&gt;I grabbed the data from &lt;a href="https://opendata.utah.gov/"&gt;Utah's Open Data Portal&lt;/a&gt; which, unfortunately, only has data up through 2013.&lt;/p&gt;
&lt;p&gt;&lt;img alt="svg" src="https://codyhatch.com/images/utah-energy-production/utah-energy-sources.svg"&gt;&lt;/p&gt;</content><category term="Data Science"></category><category term="Utah"></category><category term="economy"></category><category term="energy"></category><category term="politics"></category><category term="statistics"></category></entry><entry><title>Configure Nginx to Protect Ghost Login Page</title><link href="https://codyhatch.com/cyber-security/nginx-protect-ghost-login.html" rel="alternate"></link><published>2013-10-25T12:35:00-06:00</published><updated>2013-10-25T12:35:00-06:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2013-10-25:/cyber-security/nginx-protect-ghost-login.html</id><summary type="html">&lt;p&gt;How to configure Nginx to protect the Ghost login page when proxying to Node.js&lt;/p&gt;</summary><content type="html">&lt;p&gt;In information security, it is not possible to be correct all the time - things will break, controls will fail, and software bugs will exist; those things are inevitable, so a key element of information security is to reduce the attack surface of a system.&lt;/p&gt;
&lt;p&gt;Wikipedia has a good definition of "attack surface":&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"The attack surface of a software environment is the code within a computer system that can be run by unauthorized users. This includes, but is not limited to: user input fields, protocols, interfaces, and services. OSSTMM 3 Defines Attack Surface as 'The lack of specific separations and functional controls that exist for that vector'. One approach to improving information security is to reduce the attack surface of a system or software. By turning off unnecessary functionality, there are fewer security risks. By having less code available to unauthorized actors, there will tend to be fewer failures. Although attack surface reduction helps prevent security failures, it does not mitigate the amount of damage an attacker could inflict once a vulnerability is found."&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="http://www.ghost.org"&gt;Ghost&lt;/a&gt; is some fantastic software but will inevitably have security vulnerabilities, especially in the complex pieces within the administration functions. It would be a good idea to reduce Ghost's attack surface by restricting what systems can even access the administrative portion of Ghost, and access controls within Nginx allow us to do so if we are using Nginx to proxy connections to Ghost.&lt;/p&gt;
&lt;p&gt;Access controls within Nginix are pretty straightforward. For example, if you want to allow a specific IP address to access a portion of your site, but deny all others, you'd define the location and access controls within the server block:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;server {
    ...
    location /mysecretlocation/ {
        allow 1.1.1.1;
        deny all;
    }
    ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;That's pretty straightforward, causing Nginx to allow connections to www.example.com/mysecretlocation by the IP address 1.1.1.1, while kicking a 403 Forbidden message to all others.&lt;/p&gt;
&lt;p&gt;This gets a little different when using Nginx to proxy connections to Ghost, but it is still pretty straightforward - we just need to add the proxy information to the location block, like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;...&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;location&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;/ghost/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;allow&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;1.1.1.1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;deny&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;all&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;proxy_set_header&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="err"&gt;X-Real-IP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$remote_addr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;proxy_set_header&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="err"&gt;X-Forwarded-For&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;$proxy_add_x_forwarded_for&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;proxy_set_header&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="err"&gt;X-Forwarded-Proto&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$scheme&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;proxy_set_header&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="err"&gt;Host&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$http_host&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;proxy_set_header&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="err"&gt;Connection&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;proxy_http_version&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;1.1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;proxy_pass&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;ghost_upstream_defined_in_nginx_conf&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This config does the same thing as before but applies it to the proxy for Ghost, which is important since the URI of &lt;code&gt;/ghost/signin&lt;/code&gt; doesn't actually exist in the website's directory root, but is only understood by Ghost. However, if an IP other than 1.1.1.1 were to go to www.mywebsite.com/ghost/signin, they would get a 403 Forbidden message.&lt;/p&gt;
&lt;p&gt;Now, when a vulnerability is identified that affects Ghost's administration functionality, the website's exposure to that vulnerability should be greatly reduced.&lt;/p&gt;
&lt;p&gt;If you have any feedback or questions, contact me on Twitter at &lt;a href="http://twitter.com/codyhatch"&gt;@codyhatch&lt;/a&gt; until I get my contact page up on this site.&lt;/p&gt;</content><category term="Cyber Security"></category><category term="Application"></category><category term="web"></category><category term="cyber security"></category></entry><entry><title>Nginx Tip - Remove Version Number</title><link href="https://codyhatch.com/cyber-security/nginx-remove-version-number.html" rel="alternate"></link><published>2013-10-24T12:06:00-06:00</published><updated>2013-10-24T12:06:00-06:00</updated><author><name>Cody Hatch</name></author><id>tag:codyhatch.com,2013-10-24:/cyber-security/nginx-remove-version-number.html</id><summary type="html">&lt;p&gt;How to remove the version number from Nginx HTTP headers.&lt;/p&gt;</summary><content type="html">&lt;p&gt;I wanted to give another quick tip in the process of hardening the security of Nginx.&lt;/p&gt;
&lt;p&gt;There are a bunch of things one can do to manage and limit connections, and they're good, but something that is often overlooked is removing the version number of the web server. This isn't a security-through-obscurity thing, but rather taking whatever easy steps one can take to make things even a little bit tougher for an attacker.&lt;/p&gt;
&lt;p&gt;For example, if there is a vulnerability in a specific version of Nginx, it makes sense not to broadcast the version number running on one's server to the world, allowing anyone paying attention to easily determine whether your server is vulnerable.&lt;/p&gt;
&lt;p&gt;Of course, one can go to great lengths and change the server software name altogether by modifying Nginx's source code and recompiling, but I'm going to limit this suggestion to something that is easy and within the reach of every web admin out there.&lt;/p&gt;
&lt;p&gt;To configure Nginx to stop listing its version number in error pages and HTTP headers, add the following line to the server block in your configuration file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;server_tokens&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;off&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;That's all that needs to be done. Now, Nginx will only list the fact that it is an Nginx server, but exclude the version in HTTP headers and error pages.&lt;/p&gt;</content><category term="Cyber Security"></category><category term="Application"></category><category term="web"></category><category term="cyber security"></category></entry></feed>